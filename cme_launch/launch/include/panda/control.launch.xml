<?xml version="1.0" encoding="UTF-8"?>
<launch>
	<arg name="manipulator" default="panda"/>
	<arg name="manipulator_namespace" default="$(optenv PANDA_NAMESPACE panda)"/>
	<arg name="gazebo" default="$(optenv PANDA_ENABLE_GAZEBO true)"/>

	<arg name="load_gripper" default="true" />
	<arg name="gripper" default="" />

	<!-- arm contorller -->
	<node name="franka_control" pkg="franka_control" type="franka_control_node" output="screen" required="true">
		<rosparam command="load" file="$(find franka_control)/config/franka_control_node.yaml" />
		<param name="robot_ip" value="$(arg robot_ip)" />
	</node>

	<!-- gripper controller -->

	<include file="$(find cme_launch)/launch/include/spawn_robot.launch.xml">
		<arg name="robot" value="$(arg robot)"/>
		<arg name="gazebo" value="$(arg gazebo)"/>
		<arg name="manipulator" value="$(arg manipulator)"/>
		<!-- TODO: Restructure neobotix packages -->
		<arg name="robot_description_extras" value="manipulator:=$(arg manipulator) robot_namespace:=$(arg robot_namespace)"/>
		<arg name="robot_description" value="$(find cme_description)/robots/mm_400/mm_400.urdf.xacro"/>
		<arg if="$(eval manipulator == 'panda')"
			name="manipulator_config" value="$(find cme_control)/config/mm_400/panda/controller.yaml"/>
		<arg if="$(eval manipulator == 'pilz')"
			name="manipulator_config" value="$(find cme_control)/config/mm_400/pilz/controller.yaml"/>
	</include>
</launch>
